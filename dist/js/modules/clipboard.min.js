/* Tabulator v4.8.1 (c) Oliver Folkerd */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Clipboard=function(t){this.table=t,this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.isFullTableCopy=!1};Clipboard.prototype.initialize=function(){var t=this;this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,"fullTableCopyOnly"===this.mode&&this.table.element.addEventListener("copy",function(e){if(console.log("J: Inside fullTableCopyOnly handler:",t.isFullTableCopy),t.isFullTableCopy){var o,a,i;if(!t.blocked){if(e.preventDefault(),t.customSelection)o=t.customSelection,t.table.options.clipboardCopyFormatter&&(o=t.table.options.clipboardCopyFormatter("plain",o));else{var i=t.table.modules.export.generateExportList(t.rowRange,t.table.options.clipboardCopyStyled,t.table.options.clipboardCopyConfig,"clipboard");a=t.table.modules.export.genereateHTMLTable(i),o=a?t.generatePlainContent(i):"",t.table.options.clipboardCopyFormatter&&(o=t.table.options.clipboardCopyFormatter("plain",o),a=t.table.options.clipboardCopyFormatter("html",a))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",o):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",o),a&&e.clipboardData.setData("text/html",a)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",o),a&&e.originalEvent.clipboardData.setData("text/html",a)),t.table.options.clipboardCopied.call(t.table,o,a),t.reset()}}else console.log("J:-> Not doing anything else")}),!0!==this.mode&&"copy"!==this.mode||this.table.element.addEventListener("copy",function(e){var o,a,i;if(!t.blocked){if(e.preventDefault(),t.customSelection)o=t.customSelection,t.table.options.clipboardCopyFormatter&&(o=t.table.options.clipboardCopyFormatter("plain",o));else{var i=t.table.modules.export.generateExportList(t.rowRange,t.table.options.clipboardCopyStyled,t.table.options.clipboardCopyConfig,"clipboard");a=t.table.modules.export.genereateHTMLTable(i),o=a?t.generatePlainContent(i):"",t.table.options.clipboardCopyFormatter&&(o=t.table.options.clipboardCopyFormatter("plain",o),a=t.table.options.clipboardCopyFormatter("html",a))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",o):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",o),a&&e.clipboardData.setData("text/html",a)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",o),a&&e.originalEvent.clipboardData.setData("text/html",a)),t.table.options.clipboardCopied.call(t.table,o,a),t.reset()}}),!0!==this.mode&&"paste"!==this.mode||this.table.element.addEventListener("paste",function(e){t.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction)},Clipboard.prototype.reset=function(){this.blocked=!1,this.originalSelectionText=""},Clipboard.prototype.generatePlainContent=function(t){var e=[];return t.forEach(function(t){var o=[];t.columns.forEach(function(e){var a="";if(e)if("group"===t.type&&(e.value=e.component.getKey()),null===e.value)a="";else switch(_typeof(e.value)){case"object":a=JSON.stringify(e.value);break;case"undefined":a="";break;default:a=e.value}o.push(a)}),e.push(o.join("\t"))}),e.join("\n")},Clipboard.prototype.fullTableCopyOnly=function(t,e){var t,o,a;this.blocked=!1,this.customSelection=!1,"fullTableCopyOnly"===this.mode&&(this.rowRange=t||this.table.options.clipboardCopyRowRange,void 0===e&&(void 0!==window.getSelection&&void 0!==document.createRange?(t=document.createRange(),t.selectNodeContents(this.table.element),o=window.getSelection(),o.toString()&&e&&(this.customSelection=o.toString()),o.removeAllRanges(),o.addRange(t)):void 0!==document.selection&&void 0!==document.body.createTextRange&&(a=document.body.createTextRange(),a.moveToElementText(this.table.element),a.select())),void 0===e&&(this.isFullTableCopy=!0),document.execCommand("copy"),this.isFullTableCopy=!1,void 0===e&&o&&o.removeAllRanges())},Clipboard.prototype.copy=function(t,e){var t,o,a;if(this.blocked=!1,this.customSelection=!1,console.log("J:-> this.mode is:",this.mode),"fullTableCopyOnly"===this.mode)return this.fullTableCopyOnly(t,e);!0!==this.mode&&"copy"!==this.mode||(this.rowRange=t||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?(t=document.createRange(),t.selectNodeContents(this.table.element),o=window.getSelection(),o.toString()&&e&&(this.customSelection=o.toString()),o.removeAllRanges(),o.addRange(t)):void 0!==document.selection&&void 0!==document.body.createTextRange&&(a=document.body.createTextRange(),a.moveToElementText(this.table.element),a.select()),document.execCommand("copy"),o&&o.removeAllRanges())},Clipboard.prototype.setPasteAction=function(t){switch(void 0===t?"undefined":_typeof(t)){case"string":this.pasteAction=this.pasteActions[t],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",t);break;case"function":this.pasteAction=t}},Clipboard.prototype.setPasteParser=function(t){switch(void 0===t?"undefined":_typeof(t)){case"string":this.pasteParser=this.pasteParsers[t],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",t);break;case"function":this.pasteParser=t}},Clipboard.prototype.paste=function(t){var e,o,a;this.checkPaseOrigin(t)&&(e=this.getPasteData(t),o=this.pasteParser.call(this,e),o?(t.preventDefault(),this.table.modExists("mutator")&&(o=this.mutateData(o)),a=this.pasteAction.call(this,o),this.table.options.clipboardPasted.call(this.table,e,o,a)):this.table.options.clipboardPasteError.call(this.table,e))},Clipboard.prototype.mutateData=function(t){var e=this,o=[];return Array.isArray(t)?t.forEach(function(t){o.push(e.table.modules.mutator.transformRow(t,"clipboard"))}):o=t,o},Clipboard.prototype.checkPaseOrigin=function(t){var e=!0;return("DIV"!=t.target.tagName||this.table.modules.edit.currentCell)&&(e=!1),e},Clipboard.prototype.getPasteData=function(t){var e;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData?e=t.clipboardData.getData("text/plain"):t.originalEvent&&t.originalEvent.clipboardData.getData&&(e=t.originalEvent.clipboardData.getData("text/plain")),e},Clipboard.prototype.pasteParsers={table:function(t){var e=[],o=!0,a=this.table.columnManager.columns,i=[],n=[];return t=t.split("\n"),t.forEach(function(t){e.push(t.split("\t"))}),!(!e.length||1===e.length&&e[0].length<2)&&(!0,e[0].forEach(function(t){var e=a.find(function(e){return t&&e.definition.title&&t.trim()&&e.definition.title.trim()===t.trim()});e?i.push(e):o=!1}),o||(o=!0,i=[],e[0].forEach(function(t){var e=a.find(function(e){return t&&e.field&&t.trim()&&e.field.trim()===t.trim()});e?i.push(e):o=!1}),o||(i=this.table.columnManager.columnsByIndex)),o&&e.shift(),e.forEach(function(t){var e={};t.forEach(function(t,o){i[o]&&(e[i[o].field]=t)}),n.push(e)}),n)}},Clipboard.prototype.pasteActions={replace:function(t){return this.table.setData(t)},update:function(t){return this.table.updateOrAddData(t)},insert:function(t){return this.table.addData(t)}},Tabulator.prototype.registerModule("clipboard",Clipboard);